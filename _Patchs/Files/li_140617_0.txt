CREATE TABLE `cangku_ruku` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `kind` varchar(30) COLLATE utf8_bin NOT NULL COMMENT '入库类型',
  `type` varchar(20) COLLATE utf8_bin NOT NULL COMMENT '纱仓库/布仓库',
  `cgPlanId` int(10) NOT NULL COMMENT '采购计划id',
  `rukuCode` varchar(20) COLLATE utf8_bin NOT NULL COMMENT '入库单号',
  `songhuoCode` varchar(20) COLLATE utf8_bin NOT NULL COMMENT '送货单号',
  `supplierId` int(10) NOT NULL COMMENT '供应商id',
  `jiagonghuId` int(10) NOT NULL COMMENT '加工户Id',
  `kuweiId` int(10) NOT NULL COMMENT '库位Id',
  `rukuDate` date NOT NULL COMMENT '入库日期',
  `isGuozhang` tinyint(1) NOT NULL COMMENT '是否需要过账:0是1否',
  `memo` varchar(100) COLLATE utf8_bin NOT NULL COMMENT '备注',
  `creater` varchar(20) COLLATE utf8_bin NOT NULL COMMENT '创建人',
  `dt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'dt',
  PRIMARY KEY (`id`),
  KEY `psPlanId` (`cgPlanId`),
  KEY `rukuCode` (`rukuCode`),
  KEY `rukuDate` (`rukuDate`),
  KEY `jiagonghuId` (`supplierId`),
  KEY `jiagonghuId_2` (`jiagonghuId`),
  KEY `kuweiId` (`kuweiId`),
  KEY `type` (`type`),
  KEY `kind` (`kind`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='入库主表';
CREATE TABLE `cangku_ruku_son` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `rukuId` int(10) NOT NULL COMMENT '入库主表id',
  `productId` int(10) NOT NULL COMMENT '坯纱id',
  `pihao` varchar(20) COLLATE utf8_bin NOT NULL COMMENT '批号',
  `cnt` decimal(15,2) NOT NULL COMMENT '入库数(Kg)',
  `cntCi` decimal(15,2) NOT NULL COMMENT '次品数量',
  `memoView` varchar(100) COLLATE utf8_bin NOT NULL COMMENT '明细备注',
  `danjia` decimal(15,6) NOT NULL COMMENT '坯纱单价',
  `return4id` int(11) NOT NULL COMMENT '退库：cangku_ruku_son表关联id',
  `money` decimal(10,2) NOT NULL COMMENT '金额',
  `plan2proId` int(10) NOT NULL COMMENT '生产计划明细表关联id',
  `planGxId` int(10) NOT NULL COMMENT '生产计划工序表对应的id',
  PRIMARY KEY (`id`),
  KEY `productId` (`productId`),
  KEY `rukuId` (`rukuId`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='仓库入库子表';
CREATE TABLE `cangku_chuku` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `type` varchar(20) COLLATE utf8_bin NOT NULL COMMENT '纱仓库/布仓库',
  `kind` varchar(20) COLLATE utf8_bin NOT NULL COMMENT '出库类型',
  `clientId` int(10) NOT NULL COMMENT '客户id',
  `isCheck` tinyint(1) NOT NULL COMMENT '是否审核：0否1是',
  `departmentId` int(10) NOT NULL COMMENT '部门id',
  `peolingliao` varchar(20) COLLATE utf8_bin NOT NULL COMMENT '领料人',
  `jiagonghuId` int(10) NOT NULL COMMENT '加工户id',
  `chukuDate` date NOT NULL COMMENT '出库日期',
  `chukuCode` varchar(20) COLLATE utf8_bin NOT NULL COMMENT '出库单号',
  `isGuozhang` tinyint(1) NOT NULL COMMENT '是否过账：0是1否',
  `yuanyin` varchar(50) COLLATE utf8_bin NOT NULL COMMENT '出库原因',
  `memo` varchar(200) COLLATE utf8_bin NOT NULL COMMENT '备注',
  `dbId` int(10) NOT NULL COMMENT '调拨id;方便同时对两条数据进行处理',
  `kuweiId` int(10) NOT NULL COMMENT '库位id',
  `creater` varchar(20) COLLATE utf8_bin NOT NULL COMMENT '创建人',
  `dt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `chukuDate` (`chukuDate`),
  KEY `clientId` (`clientId`),
  KEY `jiagonghuId` (`jiagonghuId`),
  KEY `type` (`type`),
  KEY `kind` (`kind`),
  KEY `kuweiId` (`kuweiId`),
  KEY `isCheck` (`isCheck`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='仓库出库主表';
CREATE TABLE `cangku_chuku_son` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `plan2proId` int(11) NOT NULL COMMENT '生产计划子表id',
  `chukuId` int(10) NOT NULL COMMENT '出库id,pk',
  `supplierId` int(10) NOT NULL COMMENT '供应商id',
  `productId` int(10) NOT NULL COMMENT '坯纱id',
  `pihao` varchar(20) COLLATE utf8_bin NOT NULL COMMENT '批号',
  `cnt` decimal(10,2) NOT NULL COMMENT '出库数量',
  `cntCi` decimal(10,2) NOT NULL COMMENT '次品数量',
  `danjia` decimal(15,6) NOT NULL COMMENT '单价',
  `money` decimal(15,2) NOT NULL COMMENT '金额',
  `diaoboId` int(11) NOT NULL COMMENT '调拨出库生成两条记录，关联id信息',
  `memoView` varchar(100) COLLATE utf8_bin NOT NULL COMMENT '明细备注',
  `return4id` int(10) NOT NULL COMMENT '退回的时候关联本表id字段',
  `planGxId` int(10) NOT NULL COMMENT '生产计划下工序表对应id',
  PRIMARY KEY (`id`),
  KEY `supplierId` (`supplierId`),
  KEY `chukuId` (`chukuId`),
  KEY `productId` (`productId`),
  KEY `plan2proId` (`plan2proId`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='仓库出库子表';
CREATE TABLE `cangku_kucun` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `dateFasheng` date DEFAULT NULL COMMENT '发生日期',
  `rukuId` int(11) NOT NULL COMMENT '入库表id',
  `chukuId` int(11) NOT NULL COMMENT '出库表id',
  `kind` varchar(20) COLLATE utf8_bin NOT NULL COMMENT '出入库类型',
  `type` varchar(20) COLLATE utf8_bin NOT NULL COMMENT '纱/布仓库',
  `pihao` varchar(50) COLLATE utf8_bin NOT NULL COMMENT '批号',
  `jiagonghuId` int(11) NOT NULL COMMENT '加工户id',
  `productId` int(11) NOT NULL COMMENT '原料id',
  `cnt` decimal(15,2) NOT NULL COMMENT '发生数量,入库为+，出库为-',
  `cntCi` decimal(15,2) NOT NULL COMMENT '发生数量,入库为+，出库为-',
  `money` decimal(15,2) NOT NULL COMMENT '金额',
  `supplierId` int(10) NOT NULL COMMENT '供应商id',
  `kuweiId` int(10) NOT NULL COMMENT '库位Id',
  PRIMARY KEY (`id`),
  KEY `rukuId` (`rukuId`),
  KEY `chukuId` (`chukuId`),
  KEY `jiagonghuId` (`jiagonghuId`),
  KEY `supplierId` (`supplierId`),
  KEY `productId` (`productId`),
  KEY `kind` (`kind`),
  KEY `type` (`type`),
  KEY `kuweiId` (`kuweiId`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='仓库库存表';